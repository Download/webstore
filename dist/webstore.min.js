/*! [webstore 0.0.1](https://github.com/download/webstore#readme) Copyright 2015 by [Stijn de Witt](http://StijnDeWitt.com). Some rights reserved. License: [CC-BY-4.0](https://creativecommons.org/licenses/by/4.0/) */
function WebStore(a,b){if(!(this instanceof WebStore))return new WebStore(a);var c=MemoryStorage.call(this,a);if(!c.config){var e=DEFAULTS;for(var f in b)e[f]=b[f];Object.defineProperty(c,"config",{enumerable:!1,writeable:!1,configurable:!1,get:function(){return e}})}return c}function storageAvailable(a){try{var b="__storage_availability_test__";window[a].setItem(b,b);var c=window[a].getItem(b);if(window[a].removeItem(b),b!==c)throw new Error;return!0}catch(e){return!1}}function serialize(a){var b=typeof a;if("string"===b)return a;"object"===b&&(a[CTOR]=a.constructor.name);var c=W3CX+JSON.stringify(a);return delete a[CTOR],c}function deserialize(a,b){if(!a.startsWith(W3CX))return a;var c=JSON.parse(a.substring(W3CX.length),b);return c}function basicReviver(a,b){var c=typeof b;if("string"===c&&/^\d\d\d\d-\d\d-\d\dT\d\d:\d\d:\d\d.\d\d\dZ$/.test(b))return new Date(b);if("object"===c&&"string"==typeof b[CTOR]){var e=basicReviver.constructors[b[CTOR]]||window[b[CTOR]];return delete b[CTOR],"function"==typeof e?"function"==typeof e.fromJSON?e.fromJSON(b):fromJSON(e,b):b}return b}function fromJSON(a,b){for(var c,e=Object.create(a.prototype),f=Object.keys(b),g=0;c=f[g];g++)e[c]=b[c];return e}var MemoryStorage=require("memorystorage"),DEFAULTS={reviver:basicReviver};WebStore.prototype=Object.create(MemoryStorage.prototype),WebStore.constructor=WebStore,WebStore.prototype.load=function(){if(storageAvailable("localStorage"))for(var a=0;a<localStorage.length;a++){var b=localStorage.key(a);if(b.startsWith(this.id)){var c=localStorage.getItem(b);c=deserialize(c,this.config.reviver),this.setItem(b.substring(this.id.length),c)}}},WebStore.prototype.flush=function(){if(storageAvailable("localStorage"))for(var a=0;a<this.length;a++){var b=this.key(a),c=this.getItem(b);c=serialize(c),localStorage.setItem(this.id+b,c)}},void 0===Function.prototype.name&&void 0!==Object.defineProperty&&Object.defineProperty(Function.prototype,"name",{get:function(){var a=/function\s([^(]{1,})\(/,b=a.exec(this.toString());return b&&b.length>1?b[1].trim():""}});var W3CX="__w3cx__",CTOR="__w3cx_ctor__";basicReviver.constructors={},module.exports=WebStore;
//# sourceMappingURL=webstore.min.js.map